# AI新闻分类规则与评分算法

本文档定义了如何将收集到的新闻分类到四层框架，以及如何评估相关性和重要性。

## 分类决策流程

### 第一步：关键词初筛

对每篇新闻的标题和摘要进行关键词匹配：

#### E层（变革层）关键词权重表

| 关键词类别 | 关键词 | 权重 |
|----------|--------|------|
| 模型发布 | GPT, Claude, Gemini, LLaMA, 模型发布, model release | 1.0 |
| 技术突破 | breakthrough, 突破, 创新, innovation, architecture | 0.9 |
| 开源 | open source, 开源, open weights, 开放 | 0.8 |
| 研究 | research, 研究, paper, 论文, arXiv | 0.8 |
| 技术细节 | transformer, attention, training, 训练, 微调 | 0.7 |

#### S层（创业层）关键词权重表

| 关键词类别 | 关键词 | 权重 |
|----------|--------|------|
| 融资 | funding, 融资, investment, 投资, 轮, round | 1.0 |
| 估值 | valuation, 估值, 亿美元, billion, unicorn | 0.9 |
| 产品发布 | product launch, 产品发布, 新产品, release | 0.8 |
| 并购 | acquisition, 收购, merger, 并购, M&A | 0.9 |
| 商业 | business, 商业, revenue, 营收, IPO | 0.7 |

#### U层（使用层）关键词权重表

| 关键词类别 | 关键词 | 权重 |
|----------|--------|------|
| 工具 | tool, 工具, app, 应用, plugin, 插件 | 1.0 |
| 效率 | productivity, 效率, efficiency, workflow, 工作流 | 0.9 |
| 提示词 | prompt, 提示词, prompting, prompt engineering | 0.9 |
| 教程 | tutorial, 教程, guide, 指南, how-to, 技巧 | 0.8 |
| 案例 | case study, 案例, use case, 实践, example | 0.8 |

#### M层（奇迹层）关键词权重表

| 关键词类别 | 关键词 | 权重 |
|----------|--------|------|
| AGI | AGI, artificial general intelligence, 通用人工智能, 强人工智能 | 1.0 |
| 安全 | AI safety, AI安全, alignment, 对齐, control | 0.9 |
| 伦理 | ethics, 伦理, ethical, 道德, moral | 0.9 |
| 政策 | policy, 政策, regulation, 监管, law, 法规 | 0.9 |
| 未来 | future, 未来, prediction, 预测, existential risk | 0.8 |

### 第二步：计算层次得分

对每篇新闻，计算其在四个层次的得分：

```
层次得分 = Σ(匹配关键词权重) / 关键词总数
```

**示例**：
```
标题: "OpenAI发布GPT-5，推理能力提升10倍"

E层得分:
- "GPT" (1.0) + "发布" (1.0) + "推理" (0.7) = 2.7

S层得分:
- "发布" (0.8) = 0.8

U层得分: 0

M层得分: 0

→ 主要层次: E层 (得分最高)
```

### 第三步：确定主要层次

选择得分最高的层次作为主要层次（primary_layer）。

**规则**：
1. 如果最高得分 ≥ 1.5，确定为该层
2. 如果最高得分 < 1.5，进行人工语义分析
3. 如果两个层次得分接近（差距 < 0.3），标注为多层次文章

### 第四步：标注次要层次

如果文章涉及多个层次：

**条件**：
- 次要层次得分 ≥ 0.8
- 次要层次得分 ≥ 主要层次得分 × 0.5

**示例**：
```
标题: "AI安全创业公司Anthropic完成5亿美元融资"

E层得分: 0.5
S层得分: 2.0 (融资 1.0 + 亿美元 0.9 + 创业 0.1)
U层得分: 0
M层得分: 0.9 (AI安全 0.9)

→ 主要层次: S层
→ 次要层次: M层 (0.9 ≥ 0.8 且 0.9 ≥ 2.0 × 0.5)
```

## 相关性评分算法

相关性评分（relevance_score）范围：0.0 - 1.0

### 评分公式

```
relevance_score =
  0.4 × 关键词匹配度 +
  0.3 × 来源权威性 +
  0.2 × 时效性 +
  0.1 × 内容完整性
```

### 1. 关键词匹配度 (0.0 - 1.0)

```
关键词匹配度 = min(层次得分 / 3.0, 1.0)
```

**示例**：
- 层次得分 = 2.7 → 匹配度 = 2.7/3.0 = 0.90
- 层次得分 = 1.5 → 匹配度 = 1.5/3.0 = 0.50

### 2. 来源权威性 (0.0 - 1.0)

| 来源类型 | 权威性得分 |
|---------|-----------|
| 官方博客（OpenAI, Google等） | 1.0 |
| 主流科技媒体（MIT Tech Review, TechCrunch） | 0.9 |
| 专业AI媒体（机器之心, 量子位） | 0.8 |
| 财经媒体（36氪, 投资界） | 0.7 |
| 其他来源 | 0.5 |

### 3. 时效性 (0.0 - 1.0)

```
时效性 = max(0, 1.0 - (当前时间 - 发布时间) / 最大时间范围)
```

**示例**（最大时间范围 = 7天）：
- 1小时前发布 → 时效性 = 1.0
- 1天前发布 → 时效性 = 0.86
- 3天前发布 → 时效性 = 0.57
- 7天前发布 → 时效性 = 0.0

### 4. 内容完整性 (0.0 - 1.0)

检查文章是否包含：
- ✅ 标题 (+0.3)
- ✅ 摘要/正文 (+0.4)
- ✅ 发布日期 (+0.2)
- ✅ 来源 (+0.1)

**示例**：
- 完整文章 = 1.0
- 缺少摘要 = 0.6
- 仅有标题 = 0.3

### 相关性评分示例

**示例1：重大模型发布**
```
标题: "OpenAI发布GPT-5，推理能力提升10倍"
来源: OpenAI Blog
发布时间: 2小时前

关键词匹配度: 0.90 (层次得分 2.7)
来源权威性: 1.0 (官方博客)
时效性: 1.0 (2小时前)
内容完整性: 1.0 (完整)

relevance_score = 0.4×0.90 + 0.3×1.0 + 0.2×1.0 + 0.1×1.0
                = 0.36 + 0.30 + 0.20 + 0.10
                = 0.96
```

**示例2：一般融资新闻**
```
标题: "某AI创业公司完成500万美元A轮融资"
来源: 36氪
发布时间: 1天前

关键词匹配度: 0.67 (层次得分 2.0)
来源权威性: 0.8 (专业媒体)
时效性: 0.86 (1天前)
内容完整性: 1.0 (完整)

relevance_score = 0.4×0.67 + 0.3×0.8 + 0.2×0.86 + 0.1×1.0
                = 0.27 + 0.24 + 0.17 + 0.10
                = 0.78
```

## 重要性评估规则

重要性（importance）分为三个等级：high, medium, low

### High（高重要性）

满足以下任一条件：

**E层（变革层）**：
- 主流公司重大模型发布（GPT-5, Claude 4等）
- 突破性研究成果（Nature, Science级别）
- 重大开源项目发布（LLaMA 4等）

**S层（创业层）**：
- 融资金额 ≥ 1亿美元
- 独角兽公司（估值 ≥ 10亿美元）
- 重大并购（交易额 ≥ 5亿美元）
- IPO上市

**U层（使用层）**：
- 主流产品重大功能更新（ChatGPT, Claude等）
- 革命性工具发布
- 大规模企业应用案例（用户 > 10万）

**M层（奇迹层）**：
- AGI时间线重大预测
- 重要政策法规出台
- 重大AI安全事件
- 行业领袖重要观点

### Medium（中等重要性）

满足以下任一条件：

**E层**：
- 常规模型更新
- 重要研究论文（顶会论文）
- 中等规模开源项目

**S层**：
- 融资金额 1000万 - 1亿美元
- 知名公司产品发布
- 中等规模并购

**U层**：
- 新工具发布
- 实用教程和技巧
- 中小企业应用案例

**M层**：
- 伦理讨论
- 政策提案
- 专家观点

### Low（低重要性）

不满足上述条件的其他新闻：
- 小额融资（< 1000万美元）
- 边缘产品更新
- 一般性讨论
- 重复内容

## 去重规则

### URL去重
- 完全相同的URL，保留一个
- 优先保留权威来源

### 标题相似度去重

使用简单的相似度算法：

```python
def title_similarity(title1, title2):
    # 转换为小写，分词
    words1 = set(title1.lower().split())
    words2 = set(title2.lower().split())

    # 计算Jaccard相似度
    intersection = len(words1 & words2)
    union = len(words1 | words2)

    return intersection / union if union > 0 else 0
```

**去重规则**：
- 相似度 > 0.85：视为重复
- 保留相关性得分更高的版本
- 如果得分相同，保留更权威的来源

### 内容去重

对于标题不同但内容相似的文章：
- 提取关键信息（公司名、金额、产品名）
- 如果关键信息完全一致，视为重复
- 保留内容更完整的版本

## 排序规则

在每个层次内，按以下优先级排序：

### 第一优先级：重要性
```
high > medium > low
```

### 第二优先级：相关性得分
```
relevance_score 降序
```

### 第三优先级：时效性
```
发布时间 降序（越新越靠前）
```

### 排序示例

```
文章A: importance=high, relevance=0.95, 发布时间=2小时前
文章B: importance=high, relevance=0.92, 发布时间=1小时前
文章C: importance=medium, relevance=0.98, 发布时间=30分钟前

排序结果: A > B > C
（A和B都是high，A的relevance更高）
```

## 特殊情况处理

### 1. 多语言文章

**英文文章**：
- 标题翻译为中文
- 摘要翻译为中文
- 关键点翻译为中文
- 保留原文URL

**其他语言**：
- 翻译为中文
- 标注原始语言

### 2. 付费墙内容

- 尝试获取摘要
- 如果无法获取，标注"需要订阅"
- 降低相关性得分（× 0.8）

### 3. 视频/播客内容

- 提取标题和描述
- 标注内容类型
- 如果有文字稿，提取关键信息

### 4. 社交媒体内容

- Twitter/X: 提取推文内容
- LinkedIn: 提取帖子摘要
- 验证信息来源可靠性
- 降低权威性得分（× 0.7）

## 质量控制检查清单

在输出最终结果前，检查：

- [ ] 每篇文章都有明确的主要层次
- [ ] 相关性得分 ≥ 0.5
- [ ] 没有重复文章（URL和标题）
- [ ] 所有URL可访问
- [ ] 发布日期在指定范围内
- [ ] 标题和摘要为中文
- [ ] 重要性评估合理
- [ ] 每层至少有5篇文章（如果可用）
- [ ] 总文章数在合理范围（40-80篇）

## 边界情况

### 情况1：文章无法明确分类

如果文章得分在所有层次都很低（< 0.5）：
- 归入最相关的层次
- 降低相关性得分
- 标注为"边缘内容"

### 情况2：文章跨越3个以上层次

如果文章在3个以上层次都有高得分：
- 选择得分最高的作为主要层次
- 最多标注2个次要层次
- 在摘要中说明跨层特性

### 情况3：来源不明或不可靠

- 降低权威性得分（0.3）
- 增加人工审核标记
- 如果相关性得分 < 0.6，过滤掉

## 算法优化建议

随着使用，可以优化：

1. **关键词权重调整**：根据实际效果调整权重
2. **来源权威性更新**：添加新的可信来源
3. **相似度阈值优化**：根据去重效果调整阈值
4. **评分公式调整**：根据用户反馈调整各因子权重
